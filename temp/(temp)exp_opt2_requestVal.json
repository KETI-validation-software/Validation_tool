{
  "specification": {
    "id": "spec-001",
    "name": "영상보안 시스템 요청 메시지 검증 API 명세서",
    "version": "0.1",
    "steps": [
      {
        "id": "step-1",
        "name": "인증",
        "order": 1,
        "api": {
          "name": "인증",
          "method": "POST",
          "endpoint": "/Authentication",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
            "type": "object",
            "properties": {
              "userID": {
                "type": "string",
                "validation": {
                  "minLength": 3,
                  "maxLength": 20,
                  "pattern": "^[a-zA-Z0-9_]+$"
                }
              },
              "userPW": {
                "type": "string",
                "validation": {
                  "minLength": 3,
                  "maxLength": 20,
                  "pattern": "^[a-zA-Z0-9_]+$"
                }
              }
            },
            "required": [
              "userID",
              "userPW"
            ]
          },
          "responseData": {
            "code": "200",
            "message": "성공",
            "userName": "관리자",
            "userAff": "오산시청",
            "accessToken": "abcde1234"
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          }
        }
      },
      {
        "id": "step-2",
        "name": "전송 지원 기능 정보",
        "order": 2,
        "api": {
          "name": "전송 지원 기능 정보",
          "method": "POST",
          "endpoint": "/Capabilities",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
          },
          "responseData": {
            "code": "200",
            "message": "성공",
            "streamingSupport": [
              {
                "streamProtocolType": "RTSP",
                "streamProtocolDesc": "Unicast"
              }
            ],
            "transportSupport": [
              {
                "transProtocolType": "REST_API",
                "transProtocolDesc": "trans protocol description"
              }
            ]
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          }
        }
      },
      {
        "id": "step-3",
        "name": "카메라 목록 연동",
        "order": 3,
        "api": {
          "name": "카메라 목록 연동",
          "method": "POST",
          "endpoint": "/CameraProfiles",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
          },
          "responseData": {
            "code": "200",
            "message": "성공",
            "camList": [
              {
                "camID": "cam0001",
                "camName": "카메라1",
                "camLoc": {
                  "lon": "127.127730",
                  "lat": "38.439801",
                  "alt": "32.131",
                  "desc": "3층복도"
                },
                "camConfig": {
                  "camType": "PTZ"
                }
              },
              {
                "camID": "cam0002",
                "camName": "카메라2",
                "camLoc": {
                  "lon": "127.2887",
                  "lat": "37.33671"
                },
                "camConfig": {
                  "camType": "dome"
                }
              }
            ]
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          }
        }
      },
      {
        "id": "step-4",
        "name": "저장된 영상 목록 연동",
        "order": 4,
        "api": {
          "name": "저장된 영상 목록 연동",
          "method": "POST",
          "endpoint": "/StoredVideoInfos",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
            "type": "object",
            "properties": {
              "timePeriod": {
                "type": "object",
                "properties": {
                  "startTime": {
                    "type": "integer",
                    "description": "Start time in UNIX timestamp or epoch format"
                  },
                  "endTime": {
                    "type": "integer",
                    "description": "End time in UNIX timestamp or epoch format"
                  }
                },
                "required": [
                  "startTime",
                  "endTime"
                ]
              },
              "camList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "camID": {
                      "type": "string",
                      "description": "Unique camera identifier"
                    }
                  },
                  "required": [
                    "camID"
                  ]
                },
                "minItems": 1
              }
            },
            "required": [
              "timePeriod"
            ]
          },
          "responseData": {
            "code": "200",
            "message": "성공",
            "camList": [
              {
                "camID": "cam0001",
                "timeList": [
                  {
                    "startTime": 20220822163022123,
                    "endTime": 20220822163025123
                  }
                ]
              },
              {
                "camID": "cam0002",
                "timeList": [
                  {
                    "startTime": 20220822163022123,
                    "endTime": 20220822163025123
                  }
                ]
              }
            ]
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          }
        }
      },
      {
        "id": "step-5",
        "name": "실시간 영상 정보 연동",
        "order": 5,
        "api": {
          "name": "실시간 영상 정보 연동",
          "method": "POST",
          "endpoint": "/StreamURLs",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
            "type": "object",
            "properties": {
              "camList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "camID": {
                      "type": "string",
                      "validation": {
                        "anyOf": [
                          "cam001",
                          "cam002"
                        ]
                      }
                    },
                    "streamProtocolType": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "camID",
                    "streamProtocolType"
                  ]
                }
              }
            },
            "required": [
              "camList"
            ]
          }
        },
        "respoonseData": {
          "code": "200",
          "message": "성공",
          "camList": [
            {
              "camID": "cam001",
              "accessID": "conn001",
              "accessPW": "1234",
              "camURL": "rtsp://192.168.0.1:8000"
            },
            {
              "camID": "cam002",
              "accessID": "conn002",
              "accessPW": "1234",
              "camURL": "rtsp://192.168.0.2:8000"
            },
            {
              "camID": "cam003",
              "accessID": "conn003",
              "accessPW": "1234",
              "camURL": "rtsp://192.168.0.3:8000"
            }
          ]
        },
        "timeoutSettings": {
          "connectTimeout": 5000
        }
      },
      {
        "id": "step-6",
        "name": "저장된 영상 정보 연동",
        "order": 6,
        "api": {
          "name": "저장된 영상 정보 연동",
          "method": "POST",
          "endpoint": "/ReplayURL",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
            "type": "object",
            "properties": {
              "camList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "camID": {
                      "type": "string"
                    },
                    "startTime": {
                      "type": "integer"
                    },
                    "endTime": {
                      "type": "integer"
                    },
                    "streamProtocolType": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "camID",
                    "startTime",
                    "endTime",
                    "streamProtocolType"
                  ]
                }
              }
            },
            "required": [
              "camList"
            ]
          },
          "respoonseData": {
            "code": "200",
            "message": "성공",
            "camList": [
              {
                "camID": "cam0001",
                "accessID": "conn0001",
                "accessPW": "1234",
                "startTime": 20220822163022123,
                "endTime": 20220822163025123,
                "camURL": "rtsp://192.168.0.1:8000"
              },
              {
                "camID": "cam0002",
                "accessID": "conn0002",
                "accessPW": "1234",
                "startTime": 20220822163022123,
                "endTime": 20220822163025123,
                "camURL": "rtsp://192.168.0.2:8000"
              },
              {
                "camID": "cam0003",
                "accessID": "conn0003",
                "accessPW": "1234",
                "startTime": 20220822163022123,
                "endTime": 20220822163025123,
                "camURL": "rtsp://192.168.0.3:8000"
              }
            ]
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          }
        }
      },
      {
        "id": "step-7",
        "name": "실시간 이벤트 분석 정보 연동",
        "order": 7,
        "api": {
          "name": "실시간 이벤트 분석 정보 연동",
          "method": "POST",
          "endpoint": "/RealtimeVideoEventInfos",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
            "type": "object",
            "properties": {
              "camList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "camID": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "camID"
                  ]
                }
              },
              "transProtocol": {
                "type": "object",
                "properties": {
                  "transProtocolType": {
                    "type": "string"
                  },
                  "transProtocolDesc": {
                    "type": "string"
                  }
                },
                "required": [
                  "transProtocolType"
                ]
              },
              "duration": {
                "type": "integer"
              },
              "eventFilter": {
                "type": "string"
              },
              "classFilter": {
                "type": "string"
              },
              "startTime": {
                "type": "integer"
              }
            },
            "required": [
              "camList",
              "transProtocol"
            ]
          },
          "responseData": {
            "camList": [
              {
                "camID": "cam0001",
                "eventUUID": "event01",
                "eventName": "배회",
                "startTime": 20220822163022123,
                "endTime": 20220822163025123,
                "eventDesc": "sfdfEFASDDDLKJFjdkdlfjde"
              },
              {
                "camID": "cam0002",
                "eventUUID": "event01",
                "eventName": "배회",
                "startTime": 20220822163022123,
                "endTime": 20220822163025123,
                "eventDesc": "dddddeeeeeAAFEDFiikjf"
              }
            ]
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          }
        }
      },
      {
        "id": "step-8",
        "name": "저장된 이벤트 분석 정보 연동",
        "order": 8,
        "api": {
          "name": "저장된 이벤트 분석 정보 연동",
          "method": "POST",
          "endpoint": "/StoredVideoEventInfos",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
            "type": "object",
            "properties": {
              "timePeriod": {
                "type": "object",
                "properties": {
                  "startTime": {
                    "type": "integer"
                  },
                  "endTime": {
                    "type": "integer"
                  }
                },
                "required": [
                  "startTime",
                  "endTime"
                ]
              },
              "camList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "camID": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "camID"
                  ]
                }
              },
              "maxCount": {
                "type": "integer"
              },
              "eventFilter": {
                "type": "string"
              },
              "classFilter": {
                "type": "string"
              }
            },
            "required": [
              "timePeriod"
            ]
          },
          "responseData": {
            "code": "200",
            "message": "성공",
            "camList": [
              {
                "camID": "cam0001",
                "eventUUID": "event01",
                "eventName": "배회",
                "startTime": 20220822163022123,
                "endTime": 20220822163025123,
                "eventDesc": "AAABVVVVCCCDDssvfdd"
              },
              {
                "camID": "cam0002",
                "eventUUID": "event01",
                "eventName": "배회",
                "startTime": 20220822163022123,
                "endTime": 20220822163025123,
                "eventDesc": "FFFeeiiiWWkdjflskdjfoEKK"
              },
              {
                "camID": "cam0003",
                "eventUUID": "event01",
                "eventName": "배회",
                "startTime": 20220822163022123,
                "endTime": 20220822163025123,
                "eventDesc": "iVUhEUgAAACAAAAAgCAYAAA"
              }
            ]
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          }
        }
      },
      {
        "id": "step-9",
        "name": "저장된 객체 분석 정보 연동",
        "order": 9,
        "api": {
          "name": "저장된 객체 분석 정보 연동",
          "method": "POST",
          "endpoint": "/StoredObjectAnalyticsInfos",
          "authMethod": "Bearer Token,abcd1234",
          "requestValidation": {
            "type": "object",
            "properties": {
              "timePeriod": {
                "type": "object",
                "properties": {
                  "startTime": {
                    "type": "integer"
                  },
                  "endTime": {
                    "type": "integer"
                  }
                },
                "required": [
                  "startTime",
                  "endTime"
                ]
              },
              "camList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "camID": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "camID"
                  ]
                },
                "minItems": 1
              },
              "filterList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "eventFilter": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "attributeFilter": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            },
            "required": [
              "timePeriod"
            ]
          },
          "responseData": {
            "code": "200",
            "message": "성공",
            "camList": [
              {
                "camID": "cam0001",
                "analyticsTime": 20220822163022123,
                "anlayticsResultList": [
                  {
                    "anayticsID": "object001",
                    "analyticsClass": "차량",
                    "analyticsConfidence": 0.80,
                    "analyticsBoundingBox": {
                      "left": 0.2,
                      "top": 0.1,
                      "right": 0.5,
                      "bottom": 0.6
                    },
                    "analyticsDesc": "13가 4567"
                  }
                ]
              },
              {
                "camID": "cam0002",
                "analyticsTime": 20220822163022123,
                "anlayticsResultList": [
                  {
                    "anayticsID": "object002",
                    "analyticsClass": "사람",
                    "analyticsConfidence": 0.90,
                    "analyticsBoundingBox": {
                      "left": 0.3,
                      "top": 0.1,
                      "right": 0.5,
                      "bottom": 0.7
                    }
                  }
                ]
              }
            ]
          },
          "timeoutSettings": {
            "connectTimeout": 5000
          }
        }
      }
    ]
  }
}
