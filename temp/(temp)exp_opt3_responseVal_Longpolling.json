{
  "specification": {
    "id": "spec-0022",
    "name": "보안용 센서 시스템(응답검증)",
    "version": "0.1",
    "steps": [
      {
        "id": "step-1",
        "name": "인증",
        "order": 1,
        "api": {
          "name": "인증",
          "method": "POST",
          "endpoint": "/Authentication",
          "requestData": {
            "userID": "user0001",
            "userPW": "pass0001"
          },
          "responseSchema": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "userName": {
                "type": "string"
              },
              "userAff": {
                "type": "string"
              },
              "accessToken": {
                "type": "string"
              }
            },
            "required": [
              "code",
              "message",
              "userName",
              "userAff"
            ]
          },
          "settings": {
            "connectTimeout": 5000,
            "numRetries": 1
          }
        }
      },
      {
        "id": "step-2",
        "name": "전송 지원 기능 정보 연동",
        "order": 2,
        "api": {
          "name": "전송 지원 기능 정보 연동",
          "method": "POST",
          "endpoint": "/Capabilities",
          "requestData": {},
          "responseSchema": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "transportSupport": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "transProtocolType": {
                      "type": "string"
                    },
                    "transProtocolDesc": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "transProtocolType"
                  ]
                }
              }
            },
            "required": [
              "code",
              "message",
              "transportSupport"
            ]
          },
          "settings": {
            "connectTimeout": 5000,
            "numRetries": 1
          }
        }
      },
      {
        "id": "step-3",
        "name": "보안용 센서 단말 목록 정보 연동",
        "order": 3,
        "api": {
          "name": "보안용 센서 단말 목록 정보 연동",
          "method": "POST",
          "endpoint": "/SensorDeviceProfiles",
          "requestData": {},
          "responseSchema": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "sensorDeviceList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "sensorDeviceID": {
                      "type": "string"
                    },
                    "sensorDeviceType": {
                      "type": "string"
                    },
                    "sensorDeviceName": {
                      "type": "string"
                    },
                    "sensorDeviceLoc": {
                      "type": "object",
                      "properties": {
                        "lon": {
                          "type": "string"
                        },
                        "lat": {
                          "type": "string"
                        },
                        "alt": {
                          "type": "string"
                        },
                        "desc": {
                          "type": "string"
                        }
                      },
                      "required": [
                        "lon",
                        "lat"
                      ]
                    }
                  },
                  "required": [
                    "sensorDeviceID",
                    "sensorDeviceType",
                    "sensorDeviceName"
                  ]
                }
              }
            },
            "required": [
              "code",
              "message",
              "sensorDeviceList"
            ]
          },
          "settings": {
            "connectTimeout": 5000,
            "numRetries": 1
          }
        }
      },
      {
        "id": "step-4",
        "name": "실시간 보안용 센서 데이터 정보 연동",
        "order": 4,
        "api": {
          "name": "실시간 보안용 센서 데이터 정보 연동",
          "method": "POST",
          "endpoint": "/RealtimeSensorData",
          "requestData": {
            "sensorDeviceList": [
              {
                "sensorDeviceID": "iot0001"
              },
              {
                "sensorDeviceID": "iot0002"
              },
              {
                "sensorDeviceID": "iot0003"
              }
            ],
            "duration": 100,
            "transProtocol": {
              "transProtocolType": "LongPolling"
            },
            "startTime": 20220822163022123
          },
          "responseSchema": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "sensorDeviceList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "sensorDeviceID": {
                      "type": "string"
                    },
                    "measureTime": {
                      "type": "integer"
                    },
                    "sensorDeviceType": {
                      "type": "string"
                    },
                    "sensorDeviceUnit": {
                      "type": "string"
                    },
                    "sensorDeviceValue": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "sensorDeviceID",
                    "measureTime",
                    "sensorDeviceType",
                    "sensorDeviceUnit",
                    "sensorDeviceValue"
                  ]
                }
              }
            },
            "required": [
              "code",
              "message",
              "sensorDeviceList"
            ]
          },
          "settings": {
            "connectTimeout": 5000,
            "numRetries": 1,
            "transProtocol": {
              "mode": "LongPolling",
              "durationKey": "duration"
            }
          }
        }
      },
      {
        "id": "step-5",
        "name": "실시간 보안용 센서 이벤트 분석 정보 연동",
        "order": 5,
        "api": {
          "name": "실시간 보안용 센서 이벤트 분석 정보 연동",
          "method": "POST",
          "endpoint": "/RealtimeSensorEventInfos",
          "requestData": {
            "sensorDeviceList": [
              {
                "sensorDeviceID": "iot0001"
              },
              {
                "sensorDeviceID": "iot0002"
              }
            ],
            "transProtocol": {
              "transProtocolType": "LongPolling",
              "transProtocolDesc": "description"
            },
            "duration": 200,
            "eventFilter": "화재",
            "startTime": 20220822163022123
          },
          "responseSchema": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "sensorDeviceList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "sensorDeviceID": {
                      "type": "string"
                    },
                    "eventName": {
                      "type": "string"
                    },
                    "eventTime": {
                      "type": "integer"
                    },
                    "eventDesc": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "sensorDeviceID",
                    "eventName",
                    "eventTime"
                  ]
                }
              }
            },
            "required": [
              "code",
              "message",
              "sensorDeviceList"
            ]
          },
          "settings": {
            "connectTimeout": 5000,
            "numRetries": 1,
            "transProtocol": {
              "mode": "LongPolling",
              "durationKey": "duration"
            }
          }
        }
      },
      {
        "id": "step-6",
        "name": "저장된 보안용 센서 이벤트 분석 정보 연동",
        "order": 6,
        "api": {
          "name": "저장된 보안용 센서 이벤트 분석 정보 연동",
          "method": "POST",
          "endpoint": "/StoredSensorEventInfos",
          "requestData": {
            "timePeriod": {
              "startTime": 20220822163022123,
              "endTime": 20220822263022123
            },
            "sensorDeviceList": [
              {
                "sensorDeviceID": "iot0001"
              },
              {
                "sensorDeviceID": "iot0002"
              }
            ],
            "maxCount": 10,
            "eventFilter": "화재"
          },
          "responseSchema": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "sensorDeviceList": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "sensorDeviceID": {
                      "type": "string"
                    },
                    "eventName": {
                      "type": "string"
                    },
                    "eventTime": {
                      "type": "integer"
                    },
                    "eventDesc": {
                      "type": "string"
                    }
                  },
                  "required": [
                    "sensorDeviceID",
                    "eventName",
                    "eventTime"
                  ]
                }
              }
            },
            "required": [
              "code",
              "message",
              "sensorDeviceList"
            ]
          },
          "settings": {
            "connectTimeout": 5000,
            "numRetries": 1
          }
        }
      },
      {
        "id": "step-7",
        "name": "보안용 센서 단말 제어 정보 연동",
        "order": 7,
        "api": {
          "name": "보안용 센서 단말 제어 정보 연동",
          "method": "POST",
          "endpoint": "/SensorDeviceControl",
          "requestData": {
            "sensorDeviceID": "iot0001",
            "commandType": "Alarm"
          },
          "responseSchema": {
            "type": "object",
            "properties": {
              "code": {
                "type": "string"
              },
              "message": {
                "type": "string"
              },
              "sensorDeviceID": {
                "type": "string"
              },
              "sensorDeviceStatus": {
                "type": "string"
              }
            },
            "required": [
              "code",
              "message",
              "sensorDeviceID",
              "sensorDeviceStatus"
            ]
          },
          "settings": {
            "connectTimeout": 5000,
            "numRetries": 1
          }
        }
      }
    ]
  }
}